<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake News Detector - ML Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ffffff;
        }
        
        .main-container {
            background: rgba(45, 45, 75, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            margin: 2rem auto;
            max-width: 800px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            background: linear-gradient(135deg, #2d2d4b 0%, #3a3a6b 50%, #4a5f8a 100%);
            color: white;
            padding: 2rem;
            border-radius: 20px 20px 0 0;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .content {
            padding: 2rem;
            color: #ffffff;
        }
        
        .form-control {
            background: rgba(60, 80, 120, 0.6);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #ffffff;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            background: rgba(80, 100, 150, 0.8);
            border-color: #64b5f6;
            box-shadow: 0 0 0 0.2rem rgba(100, 181, 246, 0.4);
            color: #ffffff;
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #64b5f6 0%, #1976d2 100%);
            border: none;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #42a5f5 0%, #1565c0 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(100, 181, 246, 0.5);
        }
        
        .result-card {
            background: rgba(45, 45, 75, 0.9);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            color: #ffffff;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            background: rgba(55, 55, 85, 0.95);
        }
        
        .fake-result {
            border-left: 5px solid #f44336;
        }
        
        .real-result {
            border-left: 5px solid #4caf50;
        }
        
        .confidence-bar {
            height: 8px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.2);
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            transition: width 0.8s ease;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top: 4px solid #64b5f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .model-selector {
            background: transparent;
            border-radius: 0;
            padding: 0;
            margin-bottom: 1rem;
            margin-top: 2rem;
            border: none;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #2d2d4b 0%, #3a3a6b 50%, #4a5f8a 100%);
            color: white;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-top: none;
        }
        
        .header-stats {
            background: transparent;
            color: white;
            padding: 1rem 0 0 0;
            margin: 0;
            border: none;
        }
        
        .header-stats h4 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #6fb8f4;
        }
        
        .header-stats small {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-container">
            <div class="header">
                <h1><i class="fas fa-shield-alt"></i> Fake News Detector</h1>
                <p class="mb-4">Machine Learning-powered news classifier</p>
                
                <!-- Model Performance Stats -->
                <div class="header-stats">
                    <div class="row text-center">
                        <div class="col-md-3">
                            <h4>4</h4>
                            <small>ML Models</small>
                        </div>
                        <div class="col-md-3">
                            <h4>45K+</h4>
                            <small>Training Articles</small>
                        </div>
                        <div class="col-md-3">
                            <h4>10K+</h4>
                            <small>Validation Articles</small>
                        </div>
                        <div class="col-md-3">
                            <h4>TF-IDF</h4>
                            <small>Vectorization</small>
                        </div>
                    </div>
                </div>
            </div>

                <div class="content">
                    <!-- Disclaimer -->
                    <div class="alert alert-info" role="alert" style="background: rgba(60, 80, 120, 0.7); border: 1px solid rgba(100, 181, 246, 0.4); color: #ffffff;">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-info-circle me-3" style="color: #64b5f6;"></i>
                            <div>
                                <strong>Disclaimer:</strong> This tool is designed for educational and demonstration purposes only. Users are advised to exercise critical thinking and consult multiple reliable sources when evaluating news authenticity. 
                            </div>
                        </div>
                    </div>
                    
                    <!-- Model Performance Warning -->
                    <div class="alert alert-warning" role="alert" style="background: rgba(255, 193, 7, 0.2); border: 1px solid rgba(255, 193, 7, 0.4); color: #fff3cd;">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-exclamation-triangle me-3" style="color: #ffc107;"></i>
                            <div>
                                <strong>Model Limitations:</strong> These models have been trained on historical data and perform best on longer articles. They may struggle with short statements or breaking news. The BERT model is slighty overfitted, and is biased towards classifying content as "fake news." If this is detected, the classifier will fall back to the Logistic Regression model.
                            </div>
                        </div>
                    </div>
                
                <!-- Model Selector -->
                <div class="model-selector">
                    <label for="modelSelect" class="form-label" style="color: #ffffff;"><i class="fas fa-cog" style="color: #64b5f6;"></i> Select Model:</label>
                    <select class="form-select" id="modelSelect" style="background: rgba(15, 23, 38, 0.8); border: 1px solid rgba(255, 255, 255, 0.3); color: #ffffff;">
                        <option value="logistic_regression">Logistic Regression - Recommended (Fast)</option>
                        <option value="gradient_boosting">Gradient Boosting - Alternative </option>
                        <option value="random_forest">Random Forest </option>
                        <option value="bert">BERT Transformer </option>
                    </select>
                    <small class="text-muted" style="color: rgba(255, 255, 255, 0.7);">Choose your preferred ML algorithm for classification</small>
                </div>
                
                <!-- Input Form -->
                <form id="predictionForm">
                    <div class="mb-3">
                        <label for="newsText" class="form-label" style="color: #ffffff;">
                            <i class="fas fa-newspaper" style="color: #64b5f6;"></i> Enter News Article Text:
                        </label>
                        <textarea 
                            class="form-control" 
                            id="newsText" 
                            rows="6" 
                            placeholder="Paste the news article content here... (minimum 10 characters)"
                            style="background: rgba(15, 23, 38, 0.8); border: 1px solid rgba(255, 255, 255, 0.3); color: #ffffff;"
                            required
                        ></textarea>
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search"></i> Analyze Article
                        </button>
                    </div>
                </form>
                
                <!-- Loading Spinner -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analyzing article with AI models...</p>
                </div>
                
                <!-- Results -->
                <div id="results" style="display: none;">
                    <div class="card result-card mt-4">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <h5 class="card-title">
                                        <i class="fas fa-chart-bar"></i> Analysis Results
                                    </h5>
                                    <p class="card-text">
                                        <strong>Prediction:</strong> 
                                        <span id="prediction" class="badge fs-6"></span>
                                    </p>
                                    <p class="card-text">
                                        <strong>Confidence:</strong> 
                                        <span id="confidence"></span>%
                                    </p>
                                    <p class="card-text">
                                        <strong>Model Used:</strong> 
                                        <span id="modelUsed"></span>
                                    </p>
                                </div>
                                <div class="col-md-4">
                                    <div class="text-center">
                                        <div id="resultIcon" style="font-size: 3rem; margin-bottom: 1rem;"></div>
                                        <div class="confidence-bar">
                                            <div class="confidence-fill" id="confidenceBar"></div>
                                        </div>
                                        <small class="text-muted" style="color: rgba(255, 255, 255, 0.7);">Confidence Level</small>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Probability Breakdown -->
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between">
                                        <span style="color: #ffffff;">Fake News Probability:</span>
                                        <span id="fakeProb" style="color: #ffffff;"></span>
                                    </div>
                                    <div class="progress mt-1" style="background: rgba(255, 255, 255, 0.25);">
                                        <div class="progress-bar bg-danger" id="fakeBar" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between">
                                        <span style="color: #ffffff;">Real News Probability:</span>
                                        <span id="realProb" style="color: #ffffff;"></span>
                                    </div>
                                    <div class="progress mt-1" style="background: rgba(255, 255, 255, 0.1);">
                                        <div class="progress-bar bg-success" id="realBar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Error Display -->
                <div id="error" class="alert alert-danger mt-3" style="display: none; background: rgba(244, 67, 54, 0.2); border: 1px solid rgba(244, 67, 54, 0.4); color: #ffcdd2;">
                    <i class="fas fa-exclamation-triangle" style="color: #f44336;"></i>
                    <span id="errorMessage"></span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const text = document.getElementById('newsText').value.trim();
            const model = document.getElementById('modelSelect').value;
            
            if (text.length < 10) {
                showError('Please enter at least 10 characters of text.');
                return;
            }
            
            // Show loading
            showLoading(true);
            hideError();
            hideResults();
            
            try {
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: text,
                        model: model
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    displayResults(data);
                } else {
                    showError(data.error || 'An error occurred during prediction.');
                }
            } catch (error) {
                showError('Network error. Please try again.');
            } finally {
                showLoading(false);
            }
        });
        
        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            const prediction = data.prediction;
            const confidence = data.confidence;
            const modelUsed = data.model_used.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
            
            // Set prediction
            document.getElementById('prediction').textContent = prediction;
            document.getElementById('prediction').className = `badge fs-6 ${prediction === 'Fake' ? 'bg-danger' : 'bg-success'}`;
            
            // Set confidence
            document.getElementById('confidence').textContent = confidence;
            document.getElementById('modelUsed').textContent = modelUsed;
            
            // Set probabilities
            document.getElementById('fakeProb').textContent = data.probabilities.fake + '%';
            document.getElementById('realProb').textContent = data.probabilities.real + '%';
            
            // Update progress bars
            document.getElementById('fakeBar').style.width = data.probabilities.fake + '%';
            document.getElementById('realBar').style.width = data.probabilities.real + '%';
            
            // Update confidence bar
            document.getElementById('confidenceBar').style.width = confidence + '%';
            document.getElementById('confidenceBar').className = `confidence-fill ${prediction === 'Fake' ? 'bg-danger' : 'bg-success'}`;
            
            // Set icon
            const icon = document.getElementById('resultIcon');
            if (prediction === 'Fake') {
                icon.innerHTML = '<i class="fas fa-times-circle text-danger"></i>';
                resultsDiv.querySelector('.card').classList.add('fake-result');
                resultsDiv.querySelector('.card').classList.remove('real-result');
            } else {
                icon.innerHTML = '<i class="fas fa-check-circle text-success"></i>';
                resultsDiv.querySelector('.card').classList.add('real-result');
                resultsDiv.querySelector('.card').classList.remove('fake-result');
            }
            
            resultsDiv.style.display = 'block';
        }
        
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }
        
        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('error').style.display = 'block';
        }
        
        function hideError() {
            document.getElementById('error').style.display = 'none';
        }
        
        function hideResults() {
            document.getElementById('results').style.display = 'none';
        }
    </script>
</body>
</html>
